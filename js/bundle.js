(()=>{"use strict";function e(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var t="MISSING_ENV_VAR".API_KEY,n="MISSING_ENV_VAR".CHANNEL_ID;if(!t||!n){var r=document.getElementById("main-header"),o=document.createElement("h3");o.textContent="Error: API key or channel ID not set.",o.style.color="#ff9999",r.appendChild(o),document.getElementById("live-container").style.display="none",console.error("Error: API key or channel ID not set.")}var a="https://www.googleapis.com/youtube/v3/search?key=".concat(t,"&channelId=").concat(n,"&part=snippet,id&eventType=live&type=video"),i="https://www.googleapis.com/youtube/v3/search?key=".concat(t,"&channelId=").concat(n,"&part=snippet,id&eventType=upcoming&type=video"),l="https://www.googleapis.com/youtube/v3/search?key=".concat(t,"&channelId=").concat(n,"&part=snippet,id&eventType=completed&type=video"),c=document.getElementById("live-now"),s=document.getElementById("live-soon"),d=document.getElementById("live-past");function u(e){var t,n=e.id.videoId,r=e.snippet.title,o=e.snippet.thumbnails.medium.url,a=e.snippet.liveBroadcastContent,i=new Date(e.snippet.publishedAt),l=i.toLocaleTimeString("en-US",{timeZoneName:"short"}).split(" ")[2];e.snippet.hasOwnProperty("scheduledStartTime")&&(t=new Date(e.snippet.scheduledStartTime));var c=document.createElement("div");c.classList.add("video");var s=document.createElement("img");s.src=o;var d=document.createElement("a");d.href="https://www.youtube.com/watch?v=".concat(n),d.target="_blank";var u=document.createElement("h3");u.textContent=r;var p=document.createElement("span"),m={timeZone:"UTC",hour12:!0,year:"numeric",month:"short",day:"numeric",hour:"numeric",minute:"numeric"};return p.textContent="upcoming"===a?t?"Scheduled for ".concat(t.toLocaleString("en-US",m)," ").concat(l):"Scheduled time not available":"".concat(i.toLocaleString("en-US",m)," ").concat(l),d.appendChild(s),d.appendChild(u),d.appendChild(p),c.appendChild(d),c}function p(e){e&&e.liveNow&&e.liveNow.items&&e.liveSoon&&e.liveSoon.items&&e.past&&e.past.items?(e.liveNow.items.length>0?e.liveNow.items.forEach((function(e){var t=u(e);c.appendChild(t)})):c.textContent="No live videos currently.",e.liveSoon.items.length>0?e.liveSoon.items.forEach((function(e){var t=u(e);s.appendChild(t)})):s.textContent="No scheduled livestreams. Stay tuned!",e.past.items.length>0?e.past.items.forEach((function(e){var t=u(e);d.appendChild(t)})):d.textContent="No past livestreams."):(console.error("Error displaying videos:",e),c.textContent="Error displaying videos. Please try again later.",s.textContent="Error displaying videos. Please try again later.",d.textContent="Error displaying videos. Please try again later.")}if(function r(){if(t&&n){var o=localStorage.getItem("apiResponse");if(o)try{p(JSON.parse(o))}catch(e){console.error("Error parsing cached response:",e),localStorage.removeItem("apiResponse"),r()}else Promise.all([fetch(a).then((function(e){return e.json()})),fetch(i).then((function(e){return e.json()})),fetch(l).then((function(e){return e.json()}))]).then((function(t){var n,r,o=(r=3,function(e){if(Array.isArray(e))return e}(n=t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a,i,l=[],c=!0,s=!1;try{if(a=(n=n.call(e)).next,0===t){if(Object(n)!==n)return;c=!1}else for(;!(c=(r=a.call(n)).done)&&(l.push(r.value),l.length!==t);c=!0);}catch(e){s=!0,o=e}finally{try{if(!c&&null!=n.return&&(i=n.return(),Object(i)!==i))return}finally{if(s)throw o}}return l}}(n,r)||function(t,n){if(t){if("string"==typeof t)return e(t,n);var r=Object.prototype.toString.call(t).slice(8,-1);return"Object"===r&&t.constructor&&(r=t.constructor.name),"Map"===r||"Set"===r?Array.from(t):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?e(t,n):void 0}}(n,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a={liveNow:o[0],liveSoon:o[1],past:o[2]};localStorage.setItem("apiResponse",JSON.stringify(a)),p(a)})).catch((function(e){console.error("Error fetching data from API:",e),c.textContent="Error fetching data. Please try again later.",s.textContent="Error fetching data. Please try again later.",d.textContent="Error fetching data. Please try again later."}))}}(),n){var m=document.getElementById("main-header"),h=document.createElement("div");h.setAttribute("id","channel-info"),h.setAttribute("class","g-ytsubscribe"),h.setAttribute("data-channelid",n),h.setAttribute("data-layout","full"),h.setAttribute("data-count","default"),h.setAttribute("data-theme","dark"),m.appendChild(h)}})();